"use strict";(globalThis.webpackChunkdev_guides=globalThis.webpackChunkdev_guides||[]).push([[8003],{918(e){e.exports=JSON.parse('{"permalink":"/dev-guides/blog/mejores-practicas-docker","editUrl":"https://github.com/CrisHB12/dev-guides/tree/main/blog/2026-01-10-mejores-practicas-docker.md","source":"@site/blog/2026-01-10-mejores-practicas-docker.md","title":"5 Mejores Pr\xe1cticas para Dockerfiles en Producci\xf3n","description":"Escribir un Dockerfile que funcione es f\xe1cil. Escribir uno que sea seguro, r\xe1pido y ligero requiere un poco m\xe1s de cuidado. Aqu\xed compartimos las 5 reglas de oro que seguimos en nuestros proyectos.","date":"2026-01-10T00:00:00.000Z","tags":[{"inline":false,"label":"Docker","permalink":"/dev-guides/blog/tags/docker","description":"Gu\xedas y trucos sobre contenedorizaci\xf3n con Docker."},{"inline":false,"label":"Mejores Pr\xe1cticas","permalink":"/dev-guides/blog/tags/best-practices","description":"Consejos para mejorar la calidad y seguridad del c\xf3digo."}],"readingTime":1.68,"hasTruncateMarker":true,"authors":[{"name":"Equipo de Desarrollo","title":"Mantenedores de Dev Guides","url":"https://github.com/CrisHB12","page":{"permalink":"/dev-guides/blog/authors/devteam"},"imageURL":"https://github.com/CrisHB12.png","key":"devteam"}],"frontMatter":{"slug":"mejores-practicas-docker","title":"5 Mejores Pr\xe1cticas para Dockerfiles en Producci\xf3n","authors":["devteam"],"tags":["docker","best-practices"],"date":"2026-01-10T00:00:00.000Z"},"unlisted":false,"nextItem":{"title":"\xbfPor qu\xe9 elegimos Bun sobre Node.js?","permalink":"/dev-guides/blog/por-que-usamos-bun"}}')},7092(e,s,n){n.r(s),n.d(s,{assets:()=>d,contentTitle:()=>c,default:()=>u,frontMatter:()=>i,metadata:()=>o,toc:()=>l});var o=n(918),r=n(4848),a=n(8453);const i={slug:"mejores-practicas-docker",title:"5 Mejores Pr\xe1cticas para Dockerfiles en Producci\xf3n",authors:["devteam"],tags:["docker","best-practices"],date:new Date("2026-01-10T00:00:00.000Z")},c=void 0,d={authorsImageUrls:[void 0]},l=[{value:"1. Usa im\xe1genes base oficiales y espec\xedficas",id:"1-usa-im\xe1genes-base-oficiales-y-espec\xedficas",level:2},{value:"2. Ordena tus capas por frecuencia de cambio",id:"2-ordena-tus-capas-por-frecuencia-de-cambio",level:2},{value:"3. No ejecutes como Root",id:"3-no-ejecutes-como-root",level:2},{value:"4. Usa <code>.dockerignore</code>",id:"4-usa-dockerignore",level:2},{value:"5. Multi-stage Builds",id:"5-multi-stage-builds",level:2}];function t(e){const s={code:"code",h2:"h2",hr:"hr",p:"p",pre:"pre",strong:"strong",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(s.p,{children:["Escribir un ",(0,r.jsx)(s.code,{children:"Dockerfile"})," que funcione es f\xe1cil. Escribir uno que sea seguro, r\xe1pido y ligero requiere un poco m\xe1s de cuidado. Aqu\xed compartimos las 5 reglas de oro que seguimos en nuestros proyectos."]}),"\n",(0,r.jsx)(s.h2,{id:"1-usa-im\xe1genes-base-oficiales-y-espec\xedficas",children:"1. Usa im\xe1genes base oficiales y espec\xedficas"}),"\n",(0,r.jsxs)(s.p,{children:["Evita usar la etiqueta ",(0,r.jsx)(s.code,{children:"latest"}),". Nunca sabes qu\xe9 versi\xf3n real est\xe1s descargando, lo que hace que tus builds no sean deterministas."]}),"\n",(0,r.jsxs)(s.p,{children:["\u274c ",(0,r.jsx)(s.strong,{children:"Mal:"})]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-dockerfile",children:"FROM node:latest\n"})}),"\n",(0,r.jsxs)(s.p,{children:["\u2705 ",(0,r.jsx)(s.strong,{children:"Bien:"})]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-dockerfile",children:"FROM node:20.9.0-alpine\n"})}),"\n",(0,r.jsxs)(s.p,{children:["Usar versiones espec\xedficas (",(0,r.jsx)(s.code,{children:"20.9.0"}),") y variantes ligeras (",(0,r.jsx)(s.code,{children:"alpine"})," o ",(0,r.jsx)(s.code,{children:"slim"}),") reduce la superficie de ataque y el tama\xf1o de la imagen."]}),"\n",(0,r.jsx)(s.h2,{id:"2-ordena-tus-capas-por-frecuencia-de-cambio",children:"2. Ordena tus capas por frecuencia de cambio"}),"\n",(0,r.jsx)(s.p,{children:"Docker cachea cada l\xednea del Dockerfile como una capa. Si una capa cambia, todas las siguientes deben reconstruirse."}),"\n",(0,r.jsxs)(s.p,{children:["Pon lo que ",(0,r.jsx)(s.strong,{children:"menos cambia"})," al principio (instalaci\xf3n de dependencias) y lo que ",(0,r.jsx)(s.strong,{children:"m\xe1s cambia"})," al final (tu c\xf3digo fuente)."]}),"\n",(0,r.jsxs)(s.p,{children:["\u2705 ",(0,r.jsx)(s.strong,{children:"Bien:"})]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-dockerfile",children:"WORKDIR /app\nCOPY package.json .\nRUN npm install      # Esta capa pesada se cachea si package.json no cambia\nCOPY . .             # Solo esto se reconstruye si cambias tu c\xf3digo\n"})}),"\n",(0,r.jsx)(s.h2,{id:"3-no-ejecutes-como-root",children:"3. No ejecutes como Root"}),"\n",(0,r.jsxs)(s.p,{children:["Por defecto, los contenedores corren como ",(0,r.jsx)(s.code,{children:"root"}),", lo cual es un riesgo de seguridad si alguien logra escapar del contenedor. Crea un usuario con menos privilegios."]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-dockerfile",children:"RUN addgroup -S appgroup && adduser -S appuser -G appgroup\nUSER appuser\n"})}),"\n",(0,r.jsxs)(s.h2,{id:"4-usa-dockerignore",children:["4. Usa ",(0,r.jsx)(s.code,{children:".dockerignore"})]}),"\n",(0,r.jsxs)(s.p,{children:["Es el error m\xe1s com\xfan: copiar ",(0,r.jsx)(s.code,{children:"node_modules"})," locales, archivos ",(0,r.jsx)(s.code,{children:".git"})," o secretos ",(0,r.jsx)(s.code,{children:".env"})," dentro de la imagen."]}),"\n",(0,r.jsxs)(s.p,{children:["Siempre ten un ",(0,r.jsx)(s.code,{children:".dockerignore"}),":"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-text",children:"node_modules\n.git\n.env\nDockerfile\nREADME.md\n"})}),"\n",(0,r.jsx)(s.h2,{id:"5-multi-stage-builds",children:"5. Multi-stage Builds"}),"\n",(0,r.jsx)(s.p,{children:"Para lenguajes compilados (Go, Rust, .NET) o para optimizar frontends, usa builds multi-etapa para separar el entorno de construcci\xf3n del de ejecuci\xf3n."}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-dockerfile",children:"# Etapa de Build\nFROM node:20 AS builder\nRUN npm run build\n\n# Etapa Final (Producci\xf3n)\nFROM nginx:alpine\nCOPY --from=builder /app/dist /usr/share/nginx/html\n"})}),"\n",(0,r.jsx)(s.p,{children:"\xa1La imagen final solo tendr\xe1 Nginx y tus archivos est\xe1ticos, pesando unos 20MB en lugar de los 1GB de la imagen de Node!"}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.p,{children:"Sigue estos consejos y tus despliegues ser\xe1n m\xe1s r\xe1pidos y seguros. \xbfTienes alg\xfan otro truco? \xa1Comp\xe1rtelo con el equipo!"})]})}function u(e={}){const{wrapper:s}={...(0,a.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(t,{...e})}):t(e)}},8453(e,s,n){n.d(s,{R:()=>i,x:()=>c});var o=n(6540);const r={},a=o.createContext(r);function i(e){const s=o.useContext(a);return o.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function c(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),o.createElement(a.Provider,{value:s},e.children)}}}]);